<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Puber</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/user.css">
</head>

<body>
    <div class="container">
    <h1>Welcome to Puber</h1>
    <div class="row">
        <div class="col-md-6">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">Request Puber</h3>
                </div>
                <div class="panel-body text-center">
                    <div class="row">
                        <div class="col-sm-2">&nbsp;</div>
                        <div class="col-sm-8">
                            <div class="row">
                                <div class="col-sm-6" style="margin-top: 3px;">
                                    <button type="button" id="btnStart" class="btn btn-lg btn-primary btn-block">Start Ride</button>
                                </div>
                                <div class="col-sm-6" style="margin-top: 3px;">
                                    <button type="button" id="btnUnk" class="btn btn-danger btn-lg btn-block">No car available</button>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6" style="margin-top: 3px;">
                                    <button type="button" id="btnMinute" class="btn btn-lg btn-block yellow-level progress-bar-danger progress-bar-striped" style="color: white;">Give it a minute</button>
                                </div>
                                <div class="col-sm-6" style="margin-top: 3px;">
                                    <button type="button" id="btnDone" class="btn btn-success btn-lg btn-block">Ride complete</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-2">&nbsp;</div>
                    </div>
</div>
            </div>
        </div>
        <div class="col-md-6" id="div1">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">Puber Status</h3>
                </div>
                <div class="panel-body">
                    <div id="currentstatus" class="row">
                        <div class="col-sm-7">
                            <div class="list-group">
                              <a href="#" id="red" class="list-group-item disabled">
                                <h4 class="list-group-item-heading white-text">Severe</h4>
                                <p class="list-group-item-text">Ride in progress. Abort mission.</p>
                              </a>
                              <a href="#" id="orange" class="list-group-item disabled">
                                <h4 class="list-group-item-heading white-text">High</h4>
                                <p class="list-group-item-text">Could be okay...or the opposite of okay.</p>
                              </a>
                              <a href="#" id="yellow" class="list-group-item disabled">
                                <h4 class="list-group-item-heading white-text">Elevated</h4>
                                <p class="list-group-item-text">Give it a minute</p>
                              </a>
                              <a href="#" id="blue" class="list-group-item disabled">
                                <h4 class="list-group-item-heading white-text">Guarded</h4>
                                <p class="list-group-item-text">Please be okay...please...</p>
                              </a>
                              <a href="#" id="green" class="list-group-item disabled">
                                <h4 class="list-group-item-heading white-text">Low</h4>
                                <p class="list-group-item-text">All clear!</p>
                              </a>
                            </div>
                        </div>
                        <div class="col-sm-5 text-center">
                            <h3>Brought to you by Puber.<br/></h3>
                            <em>Everyone's private...</em>
                            <img src='assets/img/puber_logo.png' class="img-responsive"/><br/>
                        </div>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>

    <script>
        $(document).ready(function () {
            $.ajax({
                    url: "http://mvpuber.webscript.io/setstatus", success: function (result) {
                        setResults(result);
                    }
                });
                
            $("#btnStart").click(function () {
                $.ajax({
                    url: "http://mvpuber.webscript.io/setstatus?status=red", success: function (result) {
                        setResults(result);
                    }
                });
            });

            $("#btnUnk").click(function () {
                $.ajax({
                    url: "http://mvpuber.webscript.io/setstatus?status=orange", success: function (result) {
                        setResults(result);
                    }
                });
            });
            
            $("#btnMinute").click(function () {
                $.ajax({
                    url: "http://mvpuber.webscript.io/setstatus?status=yellow", success: function (result) {
                        setResults(result);
                    }
                });
            });

            $("#btnDone").click(function () {
                $.ajax({
                    url: "http://mvpuber.webscript.io/setstatus?status=green", success: function (result) {
                        setResults(result);
                    }
                });
            });
        });
        
        function setResults(result)
        {
            if (result != "red") {
                document.getElementById("red").className = "list-group-item disabled";    
            } else {
                document.getElementById("red").className = "list-group-item active white-text";
            }
            
            if (result != "orange") {
                document.getElementById("orange").className = "list-group-item disabled";    
            } else {
                document.getElementById("orange").className = "list-group-item btn-danger white-text";
            }
            
            if (result != "yellow") {
                document.getElementById("yellow").className = "list-group-item disabled";    
            } else {
                document.getElementById("yellow").className = "list-group-item yellow-level white-text";
            }
            
            if (result != "blue") {
                document.getElementById("blue").className = "list-group-item disabled";    
            } else {
                document.getElementById("blue").className = "list-group-item btn-info white-text";
            }
            
            if (result != "green") {
                document.getElementById("green").className = "list-group-item disabled";    
            } else {
                document.getElementById("green").className = "list-group-item btn-success white-text";
            }
        }

    </script>
</body>

</html>
